\doxysection{Entity.\+hpp}
\hypertarget{Entity_8hpp_source}{}\label{Entity_8hpp_source}\index{include/BA/Entities/Entity.hpp@{include/BA/Entities/Entity.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <typeinfo>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <typeindex>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <unordered\_map>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <BA/Components/AI/AI.hpp>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <BA/Components/Colliders/Collider.hpp>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <BA/Components/Component.hpp>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <BA/Components/Drawable.hpp>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <BA/Entities/SharedContext.hpp>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <BA/Entities/Transformable.hpp>}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{comment}{//\ Included\ for\ the\ forward\ declaration\ of\ classes\ in\ SharedContext.}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ Probably\ unnecessary}}
\DoxyCodeLine{00017\ \textcolor{comment}{//\ \#include\ <BA/Inputs/InputManager.hpp>}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ \#include\ <BA/Resources/Warehouse.hpp>}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ \#include\ <BA/Systems/MusicPlayer.hpp>}}
\DoxyCodeLine{00020\ \textcolor{comment}{//\ \#include\ "{}BA/Window/Window.hpp"{}}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <BA/Tools/DebugHelper.hpp>}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{namespace\ }ba\ \{}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ C>}
\DoxyCodeLine{00033\ \textcolor{keyword}{concept\ }\mbox{\hyperlink{conceptba_1_1ComponentType}{ComponentType}}\ =\ std::is\_base\_of<ba::Component,\ C>::value;}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classba_1_1Entity}{Entity}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classba_1_1Transformable}{Transformable}}\ \{}
\DoxyCodeLine{00041\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{const}\ IDtype\ \mbox{\hyperlink{classba_1_1Entity_ac14ef25f58e80e0de7d01acf17e31ee8}{ID}};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structba_1_1SharedContext}{ba::SharedContext}}*\ \mbox{\hyperlink{classba_1_1Entity_acc3fd5419c4e373b4c60b622086430b0}{CONTEXT}};}
\DoxyCodeLine{00054\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{classba_1_1Entity_a975dcd3c21813b1414ebab61c83b1b9e}{Entity}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structba_1_1SharedContext}{SharedContext}}*\ context);}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classba_1_1Entity_a41eb33705fd1f952d0162331cf310645}{awake}}();}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classba_1_1Entity_a79a1b7f6e9351e6150e1b6d56ab6f115}{isStatic}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classba_1_1Entity_a5ab373ccdea15c17025865c79559d226}{setStatic}}(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classba_1_1Entity_a79a1b7f6e9351e6150e1b6d56ab6f115}{isStatic}});}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classba_1_1Entity_a8d113469ce23e4b55acb1ece81c5dcc7}{isQueuedForRemoval}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classba_1_1Entity_a05c265e873538a5a9b9dcf8ba8de76db}{queueForRemoval}}(\textcolor{keywordtype}{bool}\ remove\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keyword}{template}<ComponentType\ T>}
\DoxyCodeLine{00128\ \ \ \ \ std::shared\_ptr<T>\ \mbox{\hyperlink{classba_1_1Entity_a76b6b876c4ebbed9ac0b57d9a19cf1a0}{addComponent}}();}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keyword}{template}<\mbox{\hyperlink{conceptba_1_1ComponentType}{ComponentType}}\ T,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00142\ \ \ \ \ std::shared\_ptr<T>\ \mbox{\hyperlink{classba_1_1Entity_a76b6b876c4ebbed9ac0b57d9a19cf1a0}{addComponent}}(Args...\ args);}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keyword}{template}<ComponentType\ T>}
\DoxyCodeLine{00152\ \ \ \ \ std::shared\_ptr<T>\ \mbox{\hyperlink{classba_1_1Entity_a78b4ccc37eab89901ad87535d7b76039}{getComponent}}();}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00161\ \ \ \ \ std::shared\_ptr<Drawable>\ \mbox{\hyperlink{classba_1_1Entity_a078f293a3d9f28dd1c7e66c6eb42cedb}{getDrawable}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00170\ \ \ \ \ std::shared\_ptr<Collider>\ \mbox{\hyperlink{classba_1_1Entity_a66225fdea2e0ebe6bbcd265aabe55afd}{getCollider}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00179\ \ \ \ \ std::shared\_ptr<AI>\ \mbox{\hyperlink{classba_1_1Entity_ac475af13f7aef3065305884030edfd84}{getAI}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00180\ \textcolor{keyword}{private}:\ \textcolor{comment}{//\ ATTRIBUTES}}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_queuedForRemoval\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_static\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ std::shared\_ptr<Collider>\ m\_collider\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00187\ \ \ \ \ std::shared\_ptr<Drawable>\ m\_drawable\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00188\ \ \ \ \ std::shared\_ptr<AI>\ m\_ai\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ std::unordered\_map<std::type\_index,\ std::shared\_ptr<ba::Component>>\ m\_components;}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keyword}{static}\ IDtype\ count;}
\DoxyCodeLine{00194\ \};\ \textcolor{comment}{//\ class\ Entity}}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \textcolor{keyword}{template}<ComponentType\ T>}
\DoxyCodeLine{00207\ std::shared\_ptr<T>\ \mbox{\hyperlink{classba_1_1Entity_a76b6b876c4ebbed9ac0b57d9a19cf1a0}{Entity::addComponent}}()\ \{}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keyword}{const}\ std::type\_index\ INDEX(\textcolor{keyword}{typeid}(T));}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{if}(m\_components.contains(INDEX))\ \{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ entity\ already\ has\ a\ component\ of\ type\ T,\ just\ return\ it.}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::dynamic\_pointer\_cast<T>(m\_components.at(INDEX));}
\DoxyCodeLine{00212\ \ \ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{comment}{//\ T\ doesn't\ already\ exist.\ construct\ and\ store\ one.}}
\DoxyCodeLine{00215\ \ \ \ \ m\_components.insert\_or\_assign(INDEX,\ std::make\_shared<T>(\textcolor{keyword}{this}));}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordflow}{if}\ (std::dynamic\_pointer\_cast<Collider>(m\_components.at(INDEX))\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ m\_collider\ =\ std::dynamic\_pointer\_cast<Collider>(m\_components.at(INDEX));}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (std::dynamic\_pointer\_cast<Drawable>(m\_components.at(INDEX))\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ m\_drawable\ =\ std::dynamic\_pointer\_cast<Drawable>(m\_components.at(INDEX));}
\DoxyCodeLine{00222\ \ \ \ \ \}}
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (std::dynamic\_pointer\_cast<AI>(m\_components.at(INDEX)))\ \{}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ m\_ai\ =\ std::dynamic\_pointer\_cast<AI>(m\_components.at(INDEX));}
\DoxyCodeLine{00225\ \ \ \ \ \}}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keywordflow}{return}\ std::dynamic\_pointer\_cast<T>(m\_components.at(INDEX));}
\DoxyCodeLine{00228\ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \textcolor{keyword}{template}<\mbox{\hyperlink{conceptba_1_1ComponentType}{ComponentType}}\ T,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00231\ std::shared\_ptr<T>\ \mbox{\hyperlink{classba_1_1Entity_a76b6b876c4ebbed9ac0b57d9a19cf1a0}{Entity::addComponent}}(Args...\ args)\ \{}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keyword}{const}\ std::type\_index\ INDEX(\textcolor{keyword}{typeid}(T));}
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_components.contains(INDEX))\ \{}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ entity\ already\ has\ a\ component\ of\ type\ T,\ just\ return\ it}}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::dynamic\_pointer\_cast<T>(m\_components.at(INDEX));}
\DoxyCodeLine{00236\ \ \ \ \ \}}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{comment}{//\ T\ doesn't\ already\ exist.\ create\ it.}}
\DoxyCodeLine{00238\ \ \ \ \ m\_components.insert\_or\_assign(INDEX,\ std::make\_shared<T>(\textcolor{keyword}{this},\ args...));}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keywordflow}{if}\ (std::dynamic\_pointer\_cast<Collider>(m\_components.at(INDEX))\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ m\_collider\ =\ std::dynamic\_pointer\_cast<Collider>(m\_components.at(INDEX));}
\DoxyCodeLine{00242\ \ \ \ \ \}}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (std::dynamic\_pointer\_cast<Drawable>(m\_components.at(INDEX))\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ m\_drawable\ =\ std::dynamic\_pointer\_cast<Drawable>(m\_components.at(INDEX));}
\DoxyCodeLine{00245\ \ \ \ \ \}}
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (std::dynamic\_pointer\_cast<AI>(m\_components.at(INDEX)))\ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ m\_ai\ =\ std::dynamic\_pointer\_cast<AI>(m\_components.at(INDEX));}
\DoxyCodeLine{00248\ \ \ \ \ \}}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keywordflow}{return}\ std::dynamic\_pointer\_cast<T>(m\_components.at(INDEX));}
\DoxyCodeLine{00251\ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \textcolor{keyword}{template}\ <ComponentType\ T>}
\DoxyCodeLine{00254\ std::shared\_ptr<T>\ \mbox{\hyperlink{classba_1_1Entity_a78b4ccc37eab89901ad87535d7b76039}{Entity::getComponent}}()\ \{}
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keyword}{const}\ std::type\_index\ INDEX(\textcolor{keyword}{typeid}(T));}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_components.contains(INDEX))\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::dynamic\_pointer\_cast<T>(m\_components.at(INDEX));}
\DoxyCodeLine{00258\ \ \ \ \ \}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00261\ \}}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \}\ \textcolor{comment}{//\ namespace\ ba}}

\end{DoxyCode}
